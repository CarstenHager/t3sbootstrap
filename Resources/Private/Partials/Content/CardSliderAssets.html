<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
	xmlns:t3sb="http://typo3.org/ns/T3SBS/T3sbootstrap/ViewHelpers" data-namespace-typo3-fluid="true">

<f:asset.script identifier="cardsliderJs-{data.uid}">
	// Card Slider - Content/CardSliderAssets.html
	$('#cs{data.uid}').carousel({
	  interval: 10000
	})
	$('#cs{data.uid}').on('slide.bs.carousel', function (e) {
	  var $e = $(e.relatedTarget),
	      itemsPerSlide = {visibleCards},
	      totalItems = $('.carousel-item', this).length,
	      $itemsContainer = $('.carousel-inner', this),
	      it = itemsPerSlide - (totalItems - $e.index());
	  if (it > 0) {
	    for (var i = 0; i < it; i++) {
	      $('.carousel-item', this).eq(e.direction == "left" ? i : 0).appendTo($itemsContainer);
	    }
	  }
	});
</f:asset.script>


<f:if condition="{visibleCards} == 1">
	<f:then>
<f:asset.css identifier="cardsliderCss-{data.uid}">
@media (min-width:768px){.carousel.card-slider .carousel-inner .active{display:block}.carousel.card-slider .carousel-inner .carousel-item.active:not(.carousel-item-right):not(.carousel-item-left){transition:none}.carousel.card-slider .carousel-inner .carousel-item-next,.carousel.card-slider .carousel-inner .carousel-item-prev{position:relative;transform:translate3d(0,0,0)}.carousel.card-slider .carousel-inner .active.carousel-item+.carousel-item{position:absolute;top:0;right:-100%;z-index:-1;display:block;visibility:visible}.carousel.card-slider .active.carousel-item-left,.carousel.card-slider .carousel-item-next.carousel-item-left{position:relative;transform:translate3d(-100%,0,0);visibility:visible}.carousel.card-slider .carousel-inner .carousel-item-prev.carousel-item-right{position:absolute;top:0;left:0;z-index:-1;display:block;visibility:visible}.carousel.card-slider .active.carousel-item-right+.carousel-item-prev.carousel-item-right,.carousel.card-slider .carousel-item-prev.carousel-item-right{position:relative;transform:translate3d(100%,0,0);visibility:visible;display:block;visibility:visible}}
</f:asset.css>
	</f:then>
	<f:else>
<f:asset.css identifier="cardsliderCss-{data.uid}">
@media (min-width: 768px) {
	 #cs{data.uid} .carousel-inner .carousel-item {
		 margin-right: inherit;
	}
	<f:variable name="cssClass">#cs{data.uid} .carousel-inner .active</f:variable>
	<t3sb:loop end="{visibleCards}" iteration="i">
		{cssClass}<f:if condition="{visibleCards} != {i}">,</f:if><f:variable name="cssClass">{cssClass} + .carousel-item</f:variable>
	</t3sb:loop>
	{
		display: block;
	}
	<f:variable name="cssClass">#cs{data.uid} .carousel-inner .carousel-item.active:not(.carousel-item-right):not(.carousel-item-left)</f:variable>
	<t3sb:loop end="{visibleCards}" iteration="i">
		{cssClass}<f:if condition="{visibleCards} != {i}">,</f:if><f:variable name="cssClass">{cssClass} + .carousel-item</f:variable>
	</t3sb:loop>
	{
		transition: none;
	}
	#cs{data.uid} .carousel-inner .carousel-item-next,
	#cs{data.uid} .carousel-inner .carousel-item-prev {
		position: relative;
		transform: translate3d(0, 0, 0);
	}
	#cs{data.uid} .carousel-inner .carousel-item.active<t3sb:loop end="{visibleCards}"> + .carousel-item</t3sb:loop> {
		position: absolute;
		top: 0;
		right: calc(-100% / {visibleCards});
		z-index: -1;
		display: block;
		visibility: visible;
	}
	<f:variable name="cssClass">#cs{data.uid} .carousel-item-next.carousel-item-left + .carousel-item</f:variable>
	#cs{data.uid} .active.carousel-item-left + .carousel-item-next.carousel-item-left,
	<t3sb:loop end="{visibleCards}" iteration="i">
		{cssClass}<f:if condition="{visibleCards} != {i}">,</f:if><f:variable name="cssClass">{cssClass} + .carousel-item</f:variable>
	</t3sb:loop>
	{
		position: relative;
		transform: translate3d(-100%, 0, 0);
		visibility: visible;
	}
	#cs{data.uid} .carousel-inner .carousel-item-prev.carousel-item-right {
		position: absolute;
		top: 0;
		left: 0;
		z-index: -1;
		display: block;
		visibility: visible;
	}
	<f:variable name="cssClass">#cs{data.uid} .carousel-item-prev.carousel-item-right + .carousel-item</f:variable>
	#cs{data.uid} .active.carousel-item-right + .carousel-item-prev.carousel-item-right,
	<t3sb:loop end="{visibleCards}" iteration="i">
		{cssClass}<f:if condition="{visibleCards} != {i}">,</f:if><f:variable name="cssClass">{cssClass} + .carousel-item</f:variable>
	</t3sb:loop>
	{
		position: relative;
		transform: translate3d(100%, 0, 0);
		visibility: visible;
		display: block;
		visibility: visible;
	}
}		
</f:asset.css>	
	</f:else>
</f:if>
</html>
